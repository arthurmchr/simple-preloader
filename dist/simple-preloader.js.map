{"version":3,"file":"generated.js","sources":["node_modules/browser-pack/_prelude.js","src/SimplePreloader.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","SimplePreloader","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"arguments","concurent","headers","onComplete","onProgress","_classCallCheck","xhrFunc","bind","_concurent","_headers","_onComplete","_onProgress","_queue","_group","_inlineBlob","URL","createObjectURL","Blob","type","_createClass","key","value","Array","isArray","Symbol","iterator","next","done","addToQueue","url","id","split","pop","isLoading","progress","totalSize","blobUrl","push","getHeaders","startDownload","XMLHttpRequest","open","onload","getResponseHeader","send","getGroupQueue","filter","filterByGroup","group","Worker","addEventListener","worker","postMessage","el","getElById","data","fileLoadedHandler","res","terminate","event","getStatus","notStarted","notFinished","revokeObjectURL","stop","revoke"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","const fs = require('fs');\n\nexport default class SimplePreloader {\n\n\tconstructor({\n\t\tconcurent = 6,\n\t\theaders = false,\n\t\tonComplete = null,\n\t\tonProgress = null\n\t} = {}) {\n\n\t\tthis.xhrFunc = this.xhrFunc.bind(this);\n\n\t\tthis._concurent = concurent;\n\t\tthis._headers = headers;\n\t\tthis._onComplete = onComplete;\n\t\tthis._onProgress = onProgress;\n\n\t\tthis._queue = [];\n\t\tthis._group = null;\n\n\t\tthis._inlineBlob = URL.createObjectURL(new Blob([fs.readFileSync(`${__dirname}/worker.js`, 'utf8')], {type: 'application/javascript'}));\n\t}\n\n\tadd(paths) {\n\n\t\tif (Array.isArray(paths)) {\n\n\t\t\tfor (const el of paths) {\n\n\t\t\t\tthis.addToQueue(el);\n\t\t\t}\n\t\t}\n\t\telse this.addToQueue(paths);\n\t}\n\n\taddToQueue(file) {\n\n\t\tlet item;\n\n\t\tif (typeof file === 'string') {\n\n\t\t\titem = {\n\t\t\t\turl: file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\titem = file;\n\t\t}\n\n\t\tif (!item.id) item.id = item.url;\n\n\t\tif (!item.type) {\n\n\t\t\tconst ext = item.url.split('.');\n\t\t\titem.type = ext.length > 1 ? ext.pop() : null;\n\t\t}\n\n\t\titem.isLoading = false;\n\t\titem.progress = null;\n\t\titem.totalSize = 0;\n\t\titem.blobUrl = null;\n\n\t\tthis._queue.push(item);\n\t}\n\n\tstart(group) {\n\n\t\tthis._group = group;\n\n\t\tif (this._headers) this.getHeaders(group);\n\n\t\tthis.startDownload(group);\n\t}\n\n\tgetHeaders(group) {\n\n\t\tfor (const el of this.getGroupQueue(group)) {\n\n\t\t\tif (el.blobUrl || el.totalSize) continue;\n\n\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\txhr.open('HEAD', el.url);\n\n\t\t\txhr.onload = ()=> {\n\n\t\t\t\tel.totalSize = xhr.getResponseHeader('Content-Length');\n\t\t\t};\n\n\t\t\txhr.send();\n\t\t}\n\t}\n\n\tgetGroupQueue(group) {\n\n\t\treturn group ? this._queue.filter(this.filterByGroup(group)) : this._queue;\n\t}\n\n\tfilterByGroup(group) {\n\n\t\treturn function(el) {\n\n\t\t\treturn el.group === group;\n\t\t};\n\t}\n\n\tstartDownload(group = null, limit = this._concurent) {\n\n\t\tconst newQueue = this.getGroupQueue(group);\n\t\tlet being = limit;\n\n\t\tfor (let i = 0; i < newQueue.length; i++) {\n\n\t\t\tconst el = newQueue[i];\n\n\t\t\tif (el.isLoading || el.blobUrl) continue;\n\n\t\t\tconst worker = new Worker(this._inlineBlob);\n\n\t\t\tworker.addEventListener('message', this.xhrFunc);\n\n\t\t\tel.isLoading = true;\n\t\t\tel.worker = worker;\n\n\t\t\tworker.postMessage({\n\t\t\t\ttype: 'start',\n\t\t\t\tel: {\n\t\t\t\t\tid: el.id,\n\t\t\t\t\turl: el.url,\n\t\t\t\t\ttype: el.type\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbeing--;\n\n\t\t\tif (being === 0) return;\n\t\t}\n\t}\n\n\txhrFunc(event) {\n\n\t\tconst el = this.getElById(event.data.el.id);\n\n\t\tswitch (event.data.type) {\n\n\t\t\tcase 'onload':\n\t\t\t\tthis.fileLoadedHandler(event.data.res, el);\n\t\t\t\tbreak;\n\n\t\t\tcase 'onprogress':\n\t\t\t\tel.progress = event.data.progress;\n\n\t\t\t\tif (this._onProgress) this._onProgress(event.data.progress);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetElById(id) {\n\n\t\tfor (const el of this._queue) {\n\n\t\t\tif (el.id === id) return el;\n\t\t}\n\t}\n\n\tfileLoadedHandler(res, el) {\n\n\t\tel.worker.terminate();\n\n\t\tel.isLoading = false;\n\n\t\tif (el.type === 'json') {\n\n\t\t\tel.blobUrl = event.data.res;\n\t\t}\n\t\telse {\n\n\t\t\tlet mimetype = '';\n\n\t\t\tswitch (el.type) {\n\n\t\t\t\tcase 'jpg':\n\t\t\t\t\tmimetype = 'image/jpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'png':\n\t\t\t\t\tmimetype = 'image/png';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mp3':\n\t\t\t\t\tmimetype = 'audio/mpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'webm':\n\t\t\t\t\tmimetype = 'video/webm';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mp4':\n\t\t\t\t\tmimetype = 'video/mp4';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tel.blobUrl = URL.createObjectURL(new Blob([event.data.res], {type: mimetype}));\n\t\t}\n\n\t\tconst status = this.getStatus(this._group);\n\n\t\tif (status.notStarted) this.startDownload(this._group, 1);\n\t\telse if (status.notStarted === 0 && status.notFinished === 0 && this._onComplete) this._onComplete();\n\t}\n\n\tgetStatus(group) {\n\n\t\tlet notStarted = 0;\n\t\tlet notFinished = 0;\n\n\t\tfor (const el of this.getGroupQueue(group)) {\n\n\t\t\tif (!el.isLoading && !el.blobUrl) notStarted++;\n\t\t\telse if (el.isLoading) notFinished++;\n\t\t}\n\n\t\treturn {\n\t\t\tnotStarted,\n\t\t\tnotFinished\n\t\t};\n\t}\n\n\tstop() {\n\n\t\tfor (const el of this._queue) {\n\n\t\t\tif (el.isLoading) {\n\n\t\t\t\tel.worker.postMessage({\n\t\t\t\t\ttype: 'stop'\n\t\t\t\t});\n\n\t\t\t\tel.worker.terminate();\n\n\t\t\t\tel.isLoading = false;\n\t\t\t\tel.progress = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetResult(id) {\n\n\t\treturn this.getElById(id).blobUrl;\n\t}\n\n\trevoke(id, group) {\n\n\t\tfor (const el of this._queue) {\n\n\t\t\t// if not the correct id or group\n\n\t\t\tif (id && el.id !== id || group && el.group !== group) continue;\n\n\t\t\t// if no blob or json typed\n\n\t\t\tif (!el.blobUrl || el.type === 'json') {\n\n\t\t\t\t// if id we stop loop\n\n\t\t\t\tif (id) return;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (id) return window.URL.revokeObjectURL(el.blobUrl);\n\t\t\telse window.URL.revokeObjectURL(el.blobUrl);\n\t\t}\n\t}\n\n\tdestroy() {\n\n\t\tthis.stop();\n\t\tthis.revoke();\n\t}\n}\n"]}